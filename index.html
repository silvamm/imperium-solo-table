<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body class="bg-dark">
<h1></h1>
<div class="container-xxl text-center text-white">
    <div class="row">
        <div class="col-10">
            <div id="carouselExample" class="carousel slide">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img id="nationImage" src="images/macedonians_barbarian.png" class="d-block w-100" alt="...">
                    </div>
                    <div class="carousel-item">
                        <img src="images/bot_turn.png" class="d-block w-100" alt="...">
                    </div>
                    <div class="carousel-item">
                        <img src="images/player_turn.png" class="d-block w-100" alt="...">
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>
        <div class="col-2">
            <h4>Macedonians</h4>
            <label class="form-label">State</label>
                <div class="dropdown-center mb-2">
                    <button id="stateButton" class="btn btn-danger dropdown-toggle w-100" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Barbarian
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item state-option" href="#" data-state="Barbarian">Barbarian</a></li>
                        <li><a class="dropdown-item state-option" href="#" data-state="Empire">Empire</a></li>
                    </ul>
                </div>
                <label class="form-label">Materials: <span id="materials-value">1</span></label>
                <div class="row g-2 mb-3">
                    <div class="col-6">
                        <button class="btn btn-outline-secondary btn-lg w-100 counter-btn" data-action="decrease" data-target="materials" type="button">-</button>
                    </div>
                    <div class="col-6">
                        <button class="btn btn-outline-secondary btn-lg w-100 counter-btn" data-action="increase" data-target="materials" type="button">+</button>
                    </div>
                </div>

                <label class="form-label">Population: <span id="population-value">1</span></label>
                <div class="row g-2 mb-3">
                    <div class="col-6">
                        <button class="btn btn-outline-secondary btn-lg w-100 counter-btn" data-action="decrease" data-target="population" type="button">-</button>
                    </div>
                    <div class="col-6">
                        <button class="btn btn-outline-secondary btn-lg w-100 counter-btn" data-action="increase" data-target="population" type="button">+</button>
                    </div>
                </div>

                <label class="form-label">Progress: <span id="progress-value">1</span></label>
                <div class="row g-2 mb-3">
                    <div class="col-6">
                        <button class="btn btn-outline-secondary btn-lg w-100 counter-btn" data-action="decrease" data-target="progress" type="button">-</button>
                    </div>
                    <div class="col-6">
                        <button class="btn btn-outline-secondary btn-lg w-100 counter-btn" data-action="increase" data-target="progress" type="button">+</button>
                    </div>
                </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
        integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
        crossorigin="anonymous"></script>
<script>
    $(document).ready(function() {
        // Função para salvar no localStorage
        function saveToStorage(key, value) {
            localStorage.setItem(key, value);
        }

        // Função para carregar do localStorage
        function loadFromStorage(key, defaultValue) {
            const value = localStorage.getItem(key);
            return value !== null ? value : defaultValue;
        }

        // Carregar valores salvos ao iniciar
        function loadSavedValues() {
            // Carregar contadores
            const materials = loadFromStorage('materials', '1');
            const population = loadFromStorage('population', '1');
            const progress = loadFromStorage('progress', '1');

            $('#materials-value').text(materials);
            $('#population-value').text(population);
            $('#progress-value').text(progress);

            // Carregar estado (Barbarian/Empire)
            const savedState = loadFromStorage('state', 'Barbarian');
            const button = $('#stateButton');
            const image = $('#nationImage');

            button.text(savedState);

            if (savedState === 'Empire') {
                button.removeClass('btn-danger').addClass('btn-info');
                image.attr('src', 'images/macedonians_empire.png');
            } else {
                button.removeClass('btn-info').addClass('btn-danger');
                image.attr('src', 'images/macedonians_barbarian.png');
            }
        }

        // Carregar valores ao iniciar a página
        loadSavedValues();

        // Handler para botões de contador (+/-)
        $('.counter-btn').click(function() {
            const action = $(this).data('action');
            const target = $(this).data('target');
            const $valueSpan = $('#' + target + '-value');
            let currentValue = parseInt($valueSpan.text());

            if (action === 'increase') {
                currentValue++;
            } else if (action === 'decrease') {
                currentValue = Math.max(0, currentValue - 1); // Não permite valores negativos
            }

            $valueSpan.text(currentValue);
            saveToStorage(target, currentValue);
        });

        // Handler para dropdown de estado
        $('.state-option').click(function(e) {
            e.preventDefault();

            const state = $(this).data('state');
            const button = $('#stateButton');
            const image = $('#nationImage');

            // Atualiza o texto do botão
            button.text(state);

            if (state === 'Empire') {
                // Muda para cor info (azul) e imagem macedonians_empire.png
                button.removeClass('btn-danger').addClass('btn-info');
                image.attr('src', 'images/macedonians_empire.png');
            } else if (state === 'Barbarian') {
                // Volta para cor danger (vermelho) e imagem macedonians_barbarian.png
                button.removeClass('btn-info').addClass('btn-danger');
                image.attr('src', 'images/macedonians_barbarian.png');
            }

            // Salva o estado no localStorage
            saveToStorage('state', state);
        });
    });
</script>
</body>
</html>